<div class="search_form">
    <form (keyup)="onSearch()" (ngSubmit)="onSearch()">
        <div class="search_field">
            <input type="text" [(ngModel)]="search_term" name="search_term" id="search_term"
                [placeholder]="'Search' | translate" />
        </div>
    </form>
</div>


<h1>{{'Projects' | translate}} <a (click)="refreshProjects()" class="icon icon_refresh">{{'Refresh' | translate}}</a>
</h1>



<ng-container *ngFor="let project of visible_projects">
    <app-box [styleclass]="project.status">

        <div class="progression_outer">
            <div class="progression_inner" [style.width.%]="project.percentage"></div>
        </div>


        <h2> <a [routerLink]="['/projects', project.id]">{{project.name}}</a></h2>

        <ul *ngIf="project.random_tasks">
            <li *ngFor="let task of project.random_tasks">
                <app-task [task]="task" [canDelete]="false">
                </app-task>
            </li>
        </ul>

        <app-box-footer>
            <p>{{ project.tasks_count.incomplete}} {{'incomplete' | translate}} | {{ project.tasks_count.complete}}
                {{'complete' | translate}} </p>
        </app-box-footer>
    </app-box>

</ng-container>


<app-box *ngIf="load_more">
    <p>
        <a (click)="loadMore()" class="button button_block">{{'Load more' | translate}}</a>
    </p>
</app-box>